{# <?php #}

	/* DELETE[{%for verb in methods %}{%if not loop.first%}|{%endif%}{{verb}}{%endfor%}] */
	public function {{action}}Action()
	{
		$request = $this->getRequest();

{%for key, table in entity.dbPKColumns %}
		$route_id = (int) $this->params()->fromRoute('id', 0);
{% endfor %}

		if (! ($route_id) ) {
			return $this->redirect()->toRoute('application', ['controller' => '{{entity.name|slugify}}']);
		}

		if ($request->isPost()) {
			$del = $request->getPost('del', 'No');

			if ($del == 'Yes') {
				$post_id = (int) $request->getPost('id');
				// asert 
				$this->getTable()->delete(['city_id'=>$post_id]);
				return $this->redirect()->toRoute('application', ['controller' => '{{entity.name|slugify}}']);
			} else {
				// Redirect to list of albums
				return $this->redirect()->toRoute('application', ['controller' => '{{entity.name|slugify}}']);
			}
		} else {
			{{entity.name|variabilize}}Rowset = $this->getTable()->select([{%for key, table in entity.dbPKColumns %}{%if not loop.first%}, {%endif%}'{{key}}'=>$route_id{%endfor%}]);
			{{entity.name|variabilize}}Row = {{entity.name|variabilize}}Rowset->current();
			return ['{{entity.name|slugify}}' => {{entity.name|variabilize}}Row];// use DeleteForm ?
		}
	}

