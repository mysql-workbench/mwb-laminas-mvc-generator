<?php

declare(strict_types=1);

namespace {{module}}\Controller;

use {{module}}\Model\{{entity.name}};
use {{module}}\Model\{{entity.name}}Table;
use {{module}}\Form\{{entity.name}}Form;

use Laminas\Db\Adapter\AdapterInterface;
use Laminas\Db\Adapter\Adapter;
use Laminas\Db\TableGateway\TableGateway;
use Laminas\Db\ResultSet\ResultSet;

use Laminas\Mvc\Controller\AbstractActionController;
use Laminas\View\Model\ViewModel;


class {{entity.name}}Controller extends AbstractActionController
{
	public function getTable()
	{
		$dbAdapter = $this->getEvent()->getApplication()->getServiceManager()->get(AdapterInterface::class);
		//$dbAdapter = $container->get(AdapterInterface::class);
		$resultSetPrototype = new ResultSet();
		$resultSetPrototype->setArrayObjectPrototype(new City());
		$tableGateway = new TableGateway('{{entity.name|slugify}}', $dbAdapter, null, $resultSetPrototype);
		return $tableGateway;
	}

{%for operation, actions in crud %}
{%for action, methods in actions %}
{% set fall = false %}
{% if     fall and verbe == 'GET'%}
{% elseif fall and verbe == 'HEAD' %}
{% elseif fall and verbe == 'POST' %}
{% elseif fall and verbe == 'PUT' %}
{% elseif fall and verbe == 'DELETE' %}
{% elseif fall and verbe == 'CONNECT' %}
{% elseif fall and verbe == 'OPTIONS' %}
{% elseif fall and verbe == 'TRACE' %}
{% elseif fall and verbe == 'PATCH' %}
{% else %}
{% include 'src/Controller/actions/' ~ operation ~ '.php.twig' %}
{% endif %}
{%endfor%}
{%endfor%}
}

